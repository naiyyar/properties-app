app.buildings=function(){this._input=$("#buildings-search-txt"),this._initAutocomplete()},app.buildings.prototype={_initAutocomplete:function(){this._input.autocomplete({source:"/buildings/contribute",appendTo:"#buildings-search-results",select:$.proxy(this._select,this),response:$.proxy(this._response,this),open:$.proxy(this._open,this)}).autocomplete("instance")._renderItem=$.proxy(this._render,this)},_open:function(){$(".ui-autocomplete").append('<li class="ui-menu-item building_link_li"><span class="address"><b>Building Not Here?</b></span> <a href="javascript:void(0)" id="add_new_building" class="add_new_building"> Add a building</a></li>')},_render:function(i,e){$("#buildings-search-no-results").css("display","none"),building_name="",""==e.building_name||void 0==e.building_name?building_name=e.building_street_address:building_name=e.building_name;var n=['<p class="address"><b>'+e.building_street_address+", "+e.city+", "+e.state+" "+e.zipcode+"</b></p><br/>",'<small class="building_name">'+building_name+"</small>"];return $("<li>").append(n.join("")).appendTo(i)},_select:function(i,e){$("#units-search-txt").val(""),$("#new_unit_building").addClass("hide"),$("#search_item_form").find("#next_btn").removeClass("disabled"),1==$(".no-result-li").length&&$(".no-result-li").remove(),$("#next_to_review_btn").remove(),new app.units(e.item.id),this._input.val(e.item.building_street_address+", "+e.item.city+", "+e.item.state+" "+e.item.zipcode),$("#zip").val(e.item.zipcode);var n=$("#unit_contribution").val(),t=$("#contribution").val();return"building_amenities"==t&&(href="/buildings/"+e.item.id+"/edit",$("#search_item_form").attr("action",href)),"unit_review"==t||"unit_photos"==t||"unit_amenities"==t||"unit_price_history"==t?$("#next_btn").hasClass("hidden")||$("#next_btn").addClass("hidden"):$("#next_btn").hasClass("hidden")&&$("#next_btn").removeClass("hidden"),"unit_review"!=n&&"unit_photos"!=n&&"unit_amenities"!=n&&"unit_price_history"!=n||($("#new_unit_building #building_building_street_address").val(e.item.building_street_address),$("#new_unit_building #building_zipcode").val(e.item.zipcode),$("#new_unit_building #building_building_name").val(e.item.building_name),$(".unit-search").removeAttr("readonly"),$("#unit_name").parent().parent().hasClass("hide")||$("#unit_name").parent().parent().addClass("hide")),!1},_response:function(i,e){if(0===e.content.length){var n=$("#buildings-search-no-results"),t=['<p class="address"><b>Building Not Here?</b></p>','Contribute by<a href="javascript:void(0)" id="add_new_building" class="add_new_building"> adding a new building</a>'];ul_li=$('<li class="ui-menu-item no-result-li">').append(t.join("")),n.html(ul_li),n.css({display:"block",width:"555px",top:"36px",left:"15px"})}}};