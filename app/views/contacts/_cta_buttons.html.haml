.contact-links
	- if property.kind_of?(FeaturedListing)
		.d-block=featured_listing_contact_owner_button(property, size_class: 'btn-block')
	
	- else
		- listings_count = @listings.blank? ? property.get_listings(filter_params).size : @listings.size
		- cta_link_policy = CTALinksPolicy.new(property)
		
		- if cta_link_policy.all_three_cta?(listings_count)
			.c-links
				=check_availability_button(property.web_url, 'btn-o', info_window)
				=active_listings_button(property, on_click, 'btn-o', listings_count)

			.d-block=contact_leasing_button(property, on_click, 'btn-block')

		- elsif cta_link_policy.availability_and_contacts_cta? && listings_count <= 0
			.d-block.h-42
			.c-links
				= contact_leasing_button(property, on_click, 'btn-block')
				=check_availability_button(property.web_url, 'btn-o', info_window)

		- elsif cta_link_policy.active_web_url? && listings_count > 0 and !cta_link_policy.has_active_email?
			.d-block.h-42
			.c-links
				=check_availability_button(property.web_url, 'btn-block', info_window)
				=active_listings_button(property, on_click, 'btn-o', listings_count)

		- elsif !cta_link_policy.active_web_url? && listings_count > 0 and cta_link_policy.has_active_email?
			.d-block.h-42
			.c-links
				= contact_leasing_button(property, on_click, 'btn-block')
				=active_listings_button(property, on_click, 'btn-o', listings_count)

		- elsif cta_link_policy.active_web_url? && listings_count <= 0 and !cta_link_policy.has_active_email?
			.c-links.h-42
			.d-block=check_availability_button(property.web_url, 'btn-block', info_window)

		- elsif !cta_link_policy.active_web_url? && listings_count <= 0 and cta_link_policy.has_active_email?
			.c-links.h-42
			.d-block= contact_leasing_button(property, on_click, 'btn-block')
		- elsif cta_link_policy.active_web_url?
			.d-block.h-42.invisible=check_availability_button(property.web_url, 'btn-block', info_window)
			.c-links
		- elsif listings_count > 0
			.c-links.h-42
			.d-block=active_listings_button(property, on_click, 'btn-block', listings_count)

- if !info_window && mobile?
	:javascript
		$(document).ready(function(){
			$('.contact-links').on('click', '.ca.mobile', function(){
				window.open(this.href, '_blank');
				return false;
			})
		})