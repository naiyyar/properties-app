<div class="row">
  <div class="col-lg-12">
    <div class="media">
      <div class="media-left">
        <div class="media-body">
          <h1 class="pageTitle"><%= link_to @building.building_name_or_address, building_path(@building) %></h1> 
          <div class="address text-muted">
            <%= link_to building_path(@building) do %>
              <%= building_street_address @building %> <br />
              <%= @building.neighborhood %>
            <%end%> 
          </div>
        </div>
      </div>
    </div>
  </div>  
</div>

<h2></h2>
<div class="row">
  <div class="col-lg-8">
    <% VideoTour::CATEGORIES.each_with_index do |category, index| %>
      <h4><%= category[0] %> <%=link_to '<span class="fa fa-plus"></span>'.html_safe, '#', class: 'add-tour-form', data: { category: category } %></h4>
      <div id="<%=category[1]%>-form">
        <%= render partial: 'form_fields', locals: { category: category, index: index } %>
      </div>
    <%end%>
  </div>
</div>

<script type="text/javascript">
  var building_id = "<%=@building.id%>";
  $('.add-tour-form').on('click', function(e){
    e.preventDefault();
    var category = $(this).data('category');
    var sort_index = parseInt($('#'+category[1]+'-form').find('form').find('.video_tour_sort').val()) + 1;
    $.ajax({
      url: '/video_tours/new',
      type: 'get',
      dataType: 'script',
      data: {building_id: building_id, category: category, sort_index: sort_index },
      success: function(){
        // $('.remove-fields').bind('click');
      }
    });
  });
</script>

<style type="text/css">
  .video-preview{
    width: 100%;
    height: 80px;
    border: 1px solid #ddd;
    background: #f7f7f7;
  }
  .vertically-middle{
    position: relative;
    top: 50%;
    transform: translateY(-50%);
  }
</style>