%h2
.row
  .col-xs-12.col-sm-12.col-md-12.col-lg-12
    #filterrific_results{style: 'margin-top: 10px;'}
      .table-overflow
        %table.table.table-striped#sortable
          %thead
            %tr
              %th{width: '10%'} Feature ID(#{@featured_agents.count})
              %th{width: '12%'} Agent Name
              %th{width: '20%'} Email
              %th{width: '10%'} Neighborhood
              %th{width: '8%'} (#{@photos_count}) Photos
              %th{width: '15%'} Start Date
              %th{width: '15%'} End Date
              %th{width: '6%'} Edit
              %th{width: '6%'} Delete
              %th{width: '6%'} Renew
              %th{width: '6%'} Active
          
          %tbody.table
            - @featured_agents.each do |agent|
              %tr
                %td=link_to agent.id, edit_featured_agent_path(agent, featured_by: @featured_by)
                %td=link_to agent.full_name
                %td=link_to agent.building.try(:email), '#'
                %td= link_to '<span class="fa fa-globe"></span>'.html_safe, building.web_url, target: '_blank' if building.web_url.present?
                %td= start_date(agent)
                %td= end_date(agent)
                - unless params[:type] == 'featured'
                  %td
                    - if featured_building.featured_by_manager?
                      - if featured_building.draft?
                        = featured_building&.user&.try(:email)
                      - else 
                        = featured_building&.billings&.first&.user.try(:email)

                  %td
                    = link_to 'edit', edit_featured_building_path(featured_building, featured_by: @featured_by) unless featured_building.featured_by_manager?
                  %td
                    = link_to 'Delete', featured_building_path(featured_building), method: :delete, data: {confirm: 'Are you sure you want to delete this featured building?'}, class: 'text-danger' unless featured_building.featured_by_manager?
                  %td
                    %input.apple-switch.sb-sm.feature-building.renew.disabled{type: 'checkbox', checked: featured_building.renew, style: 'margin: 0px;', 'data-field' => 'renew', 'data-fbid' => featured_building.id, disabled: true }
                  %td
                    %input.apple-switch.sb-sm.feature-building{type: 'checkbox', checked: featured_building.active, style: 'margin: 0px;', data: { fbid: featured_building.id } }
                -else
                  %td 
                    = link_to 'edit', edit_featured_building_path(featured_building) if featured_building.draft? or featured_building.live?
                  %td
                    = link_to 'Delete', featured_building_path(featured_building), method: :delete, data: {confirm: 'Are you sure you want to delete this featured building?'}, class: 'text-danger' if featured_building.draft?
                  %td
                    %input.apple-switch.sb-sm.feature-building.renew.disabled{type: 'checkbox', checked: featured_building.renew, style: 'margin: 0px;', 'data-field' => 'renew', 'data-fbid' => featured_building.id, disabled: true }
                  %td
                    %input.apple-switch.sb-sm.feature-building{type: 'checkbox', checked: featured_building.active, style: 'margin: 0px;', data: { fbid: featured_building.id, fbby: 'manager', expired: featured_building.expired? ? 'expired' : '', billingurl: featured_building.expired? ? new_manager_featured_building_user_path(current_user, type: 'billing', fb_id: featured_building.id) : '' } }
