.form-container
  .row
    .col-xs-12.col-sm-12.col-md-12.col-lg-6
      %table.table
        - @saved_cards.each do |card|
          - exp_month = card[:exp_month].to_s.length == 2 ? card[:exp_month] : "0#{card[:exp_month]}"
          %tr
            %td="#{card[:brand].capitalize} ending in #{card[:last4]} expires #{exp_month}/#{card[:exp_year]}"
            %td.text-center
              =link_to 'Pay $49.00', '#', class: 'btn btn-primary btn-sm font-bold btn_submit'
  
  .row
    .col-xs-12.col-sm-12.col-md-12.col-lg-6
      .text-center OR
  %br
  .row
    .col-xs-12.col-sm-12.col-md-12.col-lg-6
      .panel.panel-default
        .panel-heading
          %b New Billing
        .panel-body
          = form_tag create_charge_path, method: :post, id: 'stripe-billing-form' do
            .row
              .col-xs-12.col-sm-12.col-md-12.col-lg-12
                .payment-errors.text-danger
            
            .row
              .col-xs-12.col-sm-12.col-md-12.col-lg-12
                .form-group
                  = text_field_tag :email, current_user.email, class: 'form-control', :autocomplete => :off, data: { stripe: 'email' }, id: 'user-email', placeholder: 'Email'
                  = hidden_field_tag 'billing[amount]', 49
                  = hidden_field_tag 'billing[featured_building_id]', params[:fb_id]
                  = hidden_field_tag 'billing[user_id]', current_user.id
                  / = hidden_field_tag :payment_token, nil, class: 'stripe-payment-token'

                = render 'billings/card_detail_fields'
            
            
            .form-group
              %br
              = submit_tag 'Pay $49.00', class: 'btn btn-primary btn-block font-bold btn_submit btn_submit_stripe-form'
      

:javascript
  $(function() {
    new app.AsCompBuildings;
  });

  $(document).on('keyup', function(e){
    if(e.keyCode == 40 || e.keyCode == 38){
      if(!$("ul.ui-autocomplete").is(":visible")) {
        //#ui-id-1: becasue there are two 1. global search 2. for buildings search
        $("#ui-id-1").show();
      }
    }
  })