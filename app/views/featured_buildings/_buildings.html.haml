%h2
.row
  .col-xs-12.col-sm-12.col-md-12.col-lg-12
    #filterrific_results{style: "margin-top: 10px;"}
      .table-overflow
        %table.table.table-striped#sortable
          %thead
            %tr
              %th{width: '10%'} Feature ID(#{@featured_buildings.count})
              %th{width: '20%'} Building
              %th{width: '20%'} Management
              %th{width: '8%'} Website
              %th{width: '12%'} Start Date
              %th{width: '12%'} End Date
              - unless params[:type] == 'featured'
                %th='Email' 
              %th{width: '6%'}
              %th{width: '6%'}
              %th{width: '6%'} Renew
              %th{width: '6%'} Active
          
          %tbody.table
            - @featured_buildings.each do |featured_building|
              - building = featured_building.building
              %tr
                %td=link_to featured_building.id, edit_featured_building_path(featured_building)
                %td=link_to building.building_name_or_address, building_path(building)
                %td=link_to featured_building.building.management_company.try(:name), '#'
                %td= link_to '<span class="fa fa-globe"></span>'.html_safe, building.web_url, target: '_blank' if building.web_url.present?
                %td= featured_building.try(:start_date)&.strftime('%Y-%m-%d')
                %td= featured_building.localtime_end_date&.to_s(:no_timezone)
                - unless params[:type] == 'featured'
                  %td
                    - if featured_building.featured_by_manager?
                      - if featured_building.draft?
                        = featured_building&.user&.try(:email)
                      - else 
                        = featured_building&.billing&.user.try(:email)

                  %td
                    - unless featured_building.featured_by_manager?
                      = link_to 'edit', edit_featured_building_path(featured_building) 
                  %td
                    - unless featured_building.featured_by_manager?
                      = link_to 'Delete', featured_building_path(featured_building), method: :delete, data: {confirm: "Are you sure you want to delete this featured building?"}, class: 'text-danger' 
                  %td
                    %input.apple-switch.sb-sm.feature-building.renew.disabled{type: 'checkbox', checked: featured_building.renew, style: 'margin: 0px;', 'data-field' => 'renew', 'data-fbid' => featured_building.id, disabled: true }
                  %td
                    %input.apple-switch.sb-sm.feature-building{type: 'checkbox', checked: featured_building.active, style: 'margin: 0px;', data: { fbid: featured_building.id } }
                -else
                  %td= link_to 'edit', edit_featured_building_path(featured_building)
                  %td
                    - unless featured_building.has_start_and_end_date?
                      = link_to 'Delete', featured_building_path(featured_building), method: :delete, data: {confirm: "Are you sure you want to delete this featured building?"}, class: 'text-danger'
                  %td
                    %input.apple-switch.sb-sm.feature-building.renew.disabled{type: 'checkbox', checked: featured_building.renew, style: 'margin: 0px;', 'data-field' => 'renew', 'data-fbid' => featured_building.id, disabled: true }
                  %td
                    %input.apple-switch.sb-sm.feature-building{type: 'checkbox', checked: featured_building.active, style: 'margin: 0px;', data: { fbid: featured_building.id, fbby: 'manager', expired: featured_building.expired? ? 'expired' : '', billingurl: featured_building.expired? ? new_manager_featured_building_user_path(current_user, type: 'billing', fb_id: featured_building.id) : '' } }
