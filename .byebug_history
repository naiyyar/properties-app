continue
dec[1].to_f/100
dec[1].to_f/10
dec[1]/10
dec[1]
dec = (@total_rates.to_f/buildings_count).round(2).to_s.split('.')
(@total_rates.to_f/buildings_count).round(2).to_s.split('.')
(@total_rates.to_f/buildings_count).round(2).to_s(@total_rates.to_f/buildings_count).round(2).to_s.split('.')
(@total_rates.to_f/buildings_count).round(2).to_s
(@total_rates.to_f/buildings_count).round(2)
(@total_rates.to_f/buildings_count.round(2))
(@total_rates.to_f/buildings_count.round(2)).to_s.split('.')
(@total_rates.to_f/buildings_count).round(2)
(@total_rates.to_f/buildings_count)
@stars[1].to_i.round(2)
@stars[1].to_i
@stars[1]
Decimal(@stars[1])
@stars[1].length
@stars[1].to_f.length
@stars[1].to_f
@stars[1]
@stars
@stars = (@total_rates.to_f/buildings_count).to_s.split('.')
@stars = []
(@total_rates.to_f/buildings_count).to_s.split('.')
buildings_count = @manage_buildings.count
buildings_count
@total_rates.to_s.split('.')
0.625@total_rates.to_s.split('.')/10
0.625/10
0.62/10
.62/10
62/10
(@total_rates/@manage_buildings.count).to_s.split('.')[1].to_f/10
(@total_rates/@manage_buildings.count).to_s.split('.')[1].to_f/100
(@total_rates/@manage_buildings.count).to_s.split('.')[1].to_f/10
(@total_rates/@manage_buildings.count).to_s.split('.')[1].to_f.round(2)
(@total_rates/@manage_buildings.count).to_s.split('.')[1].to_f
(@total_rates/@manage_buildings.count).to_s.split('.')
@total_rates/@manage_buildings.count.to_f.round(2)
@total_rates/@manage_buildings.count.to_d.round(2)
@total_rates/@manage_buildings.count.round(2)
(@total_rates/@manage_buildings.count.round(2)).to_s.split('.')
(@total_rates/@manage_buildings.count).to_s.split('.')
(@total_rates/@manage_buildings).to_s.split('.')
@total_rates/@manage_buildings.to_s.split('.')
@total_rates/@manage_buildings.count
@total_rates
stars
continue
@decimal_part
@total_rates
continue
@total_rates
continue
@total_rates
rating_cache
@total_rates
continue
@total_rates
rating_cache.first.avg
rating_cache
@total_rates
continue
@decimal_part >= 0.76
rating_cache.first.avg.nan?
@decimal_part += @decimal_part.to_s.split('.')[1].to_f/10
@decimal_part = rating_cache.first.avg.round(2)
rating_cache.first.avg.round(2)
@total_rates
rating_cache
@decimal_part
rating_cache.first.avg
@total_rates
continue
params
continue
params
continue
params
continue
params
continue
params
continue
params
continue
@management_company
Building.where(id: params[:managed_building_id])
params
continue
Building.text_search(params[:term]).reorder('building_street_address ASC').limit(10).includes(:units)
Building.text_search(params[:term])
params
continue
params[:filter][:amenities].include?(val.to_s)
val.to_s
val
continue
Amenity.where('name = ? AND name = ?',amenities[0], amenities[1]).count
Amenity.where(name: amenities[0], name: amenities[1]).count
Amenity.where('name = ? AND name = ?',amenities[0], amenities[1]).count
Amenity.where(name: amenities).map(&:amenitable_id).uniq
Amenity.where(name: amenities).map(&:amenitable_id)
Amenity.where(name: amenities).count
buildings.count
amenities
continue
buildings.where(id: selected_emenities.map(&:amenitable_id)).count
selected_emenities.map(&:amenitable_id).uniq
selected_emenities.map(&:amenitable_id)
selected_emenities = Amenity.where(name: amenities[0], name: amenities[1])
amenities.length == 2
amenities
selected_emenities.map(&:amenitable_id)
selected_emenities.count
selected_emenities
continue
rating == '1'
rating == 1
rating
continue
rating
continue
rating
continue
request.fullpath
continue
request.fullpath
request.full_path
params[:filter]
params
continue
rec.save
rec.number_of_elevators = @elevators
rec = self.amenities.where(name: 'Elevator').first_or_initialize 
self.amenities.where(name: 'Elevator').first_or_initialize
@elevators
self.amenities.where(name: 'Elevator')
@elevators = (amenities[key.to_sym] == 'Elevator' ? building_params[:elevator] : nil)
building_params[:elevator]
amenities[key.to_sym] == 'Elevator'
key
continue
building_params[:elevator]
amenity[building_params.keys.first.to_sym]
amenity[building_params.keys.first]
amenity = ApplicationController.helpers.building_amenities
building_params.keys
building_params
continue
Amenity.where(name: amenities).map(&:amenitable_id)
Amenity.where(name: amenities).count
Amenity.where(name: amenities)
Amenity.where(name: amenities).map(&:amenitable_id).count
amenities
continue
params[:filter][:rating]
params
val
continue
Building.filter_by_rates(@buildings, rating).filter_by_beds(@buildings, beds).filter_by_types(@buildings, building_types).sort_buildings(@buildings, params[:sort_by])
Building.filter_by_beds(@buildings, beds).filter_by_types(@buildings, building_types)
Building.filter_by_beds(@buildings, beds).count
Building.filter_by_beds(@buildings, beds)
filter_by_beds(@buildings, beds)
Building.filter_by_rates(@buildings, rating)
Building.filter_by_rates(@buildings, rating).filter_by_beds(@buildings, beds).count
Building.filter_by_rates(@buildings, rating).filter_by_beds(@buildings, beds)
filter_by_beds(@buildings, beds)
filter_by_rates(@buildings, rating)
@buildings.count
@buildings
continue
buildings.where(building_type: type)
type
buildings.count
continue
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('reviews.id').order('COUNT(reviews.reviewable_id) desc')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('COUNT(reviews.reviewable_id) desc')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('COUNT(reviews.reviewable_id) asc')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('SUM(reviews.reviewable_id) asc')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('SUM(reviews.reviewable_id) desc')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('SUM(reviews.reviewable_id)').to_sql
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82]).group('id').order('SUM(reviews.reviewable_id)')
Building.joins(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82])
Building.join(:reviews).where('buildings.id in (?)', [67, 65, 68, 73, 198, 122, 82])
Building.where(id: [67, 65, 68, 73, 198, 122, 82]).joins(:reviews).count
Building.where(id: [67, 65, 68, 73, 198, 122, 82]).joins(:reviews).group('id')
Building.where(id: [67, 65, 68, 73, 198, 122, 82]).joins(:reviews).count
Building.where(id: [67, 65, 68, 73, 198, 122, 82]).joins(:reviews)
Building.where(id: [67, 65, 68, 73, 198, 122, 82]).count
buildings.where(id: @ratings.map(&:cacheable_id))
@ratings = RatingCache.where(cacheable_id: buildings.map(&:id)).order('avg desc')
RatingCache.where(cacheable_id: buildings.map(&:id)).order('avg desc').map(&:cacheable_id)
RatingCache.where(cacheable_id: buildings.map(&:id)).order(:avg).map(&:cacheable_id)
buildings.map(&:id)
buildings.pluck(:id)
RatingCache.where(cacheable_id: buildings.map(&:id)).order(:avg)
RatingCache.where(cacheable_id: buildings.map(&:id)).count
RatingCache.where(cacheable_id: buildings.map(&:id))
buildings.joins(:rates)
buildings.joins(:ratings).count
buildings.joins(:ratings)
buildings.joins(:reviews)[0]
buildings.joins(:reviews)
buildings.join(:reviews)
buildings.count
buildings.coun
sort_params
params
continue
rates.map(&:cacheable_id)
rates.map(&:cacheable_type)
rates.count
rates = RatingCache.where(cacheable_type: "Building", avg: filter_params[:rating])
rates = RatingCache.where(cacheable_type: "Building", stars: filter_params[:rating])
rates.map(&:rateable_id).uniq.count
rates.map(&:rateable_id).uniq
rates.map(&:rateable_id)
rates.map(&rateable_id)
rates.count
rates = Rate.where(rateable_type: "Building", stars: filter_params[:rating])
filter_params
continue
params
continue
params
continue
params
continue
params
continue
params
continue
request.format.json?
request.format.html?
request.format.methods
request.html
request.html?
request.json?
request.format
continue
dimension
review_id
continue
row
continue
row
continue
row
continue
row
continue
row
